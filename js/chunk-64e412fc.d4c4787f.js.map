{"version":3,"sources":["webpack:///./src/pages/checkout/Checkout.vue","webpack:///./src/pages/checkout/Checkout.vue?8c17","webpack:///./src/pages/checkout/Checkout.vue?d4a8"],"names":["class","for","id","totalItems","products","product","key","src","image","style","alt","product_name","quantity","currency","price","subTotal","validation-schema","schema","infor","fullName","type","name","placeholder","phone","email","address","components","Form","Field","ErrorMessage","mounted","script","document","createElement","addEventListener","this","setLoaded","body","appendChild","data","shape","required","fullname","loaded","paidFor","computed","methods","window","paypal","Buttons","createOrder","actions","order","create","purchase_units","description","amount","currency_code","value","size","color","onApprove","capture","console","log","changeStatusOrderItems","userId","user","getProductsInCart","addressShipping","user_id","full_name","orders","total","REMOVE_CART","$router","push","onError","err","render","__exports__"],"mappings":"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","file":"js/chunk-64e412fc.d4c4787f.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"py-5 text-center\"></div>\n    <div class=\"row\">\n      <div class=\"col-md-4 order-md-2 mb-4\">\n        <h4 class=\"d-flex justify-content-between align-items-center mb-3\">\n          <span class=\"text-muted\">Your cart</span>\n          <span class=\"badge badge-secondary badge-pill\">{{totalItems}}</span>\n        </h4>\n        <ul class=\"list-group mb-3\">\n          <li v-for=\"product in products\" :key=\"product.id\" class=\"list-group-item d-flex justify-content-between lh-condensed\">\n            <div class=\"row\">\n              <div class=\"col-3\">\n                <img :src=\"product.product.image\" style=\"width: 100%\" alt=\"\">\n              </div>\n              <div class=\"col-6\">\n                <p>{{`${product.product.product_name} x ${product.quantity}`}}</p>\n              </div>\n              <div class=\"col-3\">\n                <p>{{currency(product.product.price * product.quantity)}}</p>\n              </div>\n            </div>\n          </li>\n          <li class=\"list-group-item d-flex justify-content-between\">\n            <span>Total (USD)</span>\n            <strong>{{currency(subTotal)}}</strong>\n          </li>\n        </ul>\n      </div>\n      <div class=\"col-md-8 order-md-1\">\n        <h4 class=\"mb-3\">Billing address</h4>\n        <Form class=\"needs-validation\" :validation-schema=\"schema\">\n          <div class=\"mb-3\">\n            <label for=\"username\">Full name</label>\n            <div class=\"input-group\">\n              <Field v-model=\"infor.fullName\" type=\"text\" class=\"form-control\" name=\"fullname\" id=\"username\" placeholder=\"Full name\" />\n            </div>\n            <ErrorMessage name=\"fullname\" class=\"text-danger d-block\" />\n          </div>\n            <div class=\"mb-1\">\n              <label for=\"phone\">Phone</label>\n              <div class=\"input-group\">\n                <Field v-model=\"infor.phone\" type=\"text\" class=\"form-control\" name=\"phone\" id=\"phone\" placeholder=\"Phone\" />\n              </div>\n              <ErrorMessage name=\"phone\" class=\"text-danger d-block\" />\n            </div>\n          <div class=\"mb-1\">\n            <label for=\"email\">Email</label>\n            <div class=\"input-group\">\n              <Field v-model=\"infor.email\" type=\"email\" class=\"form-control\" name=\"email\" id=\"email\" placeholder=\"you@example.com\"/>\n            </div>\n            <ErrorMessage name=\"email\" class=\"text-danger d-block\" />\n          </div>\n\n          <div class=\"mb-1\">\n            <label for=\"address\">Address</label>\n            <Field v-model=\"infor.address\" type=\"text\" class=\"form-control\" name=\"address\" id=\"address\" placeholder=\"1234 Main St\" />\n            <ErrorMessage name=\"address\" class=\"text-danger d-block\" />\n          </div>\n          <h4 class=\"mb-1\">Payment</h4>\n          <div v-show=\"infor.fullName !=='' && infor.address !== '' && infor.email!=='' && infor.phone !=='' \">\n            <div class=\"text-center s-text20 font-weight-bold mb-3\">Please pay to complete checkout</div>\n            <div class=\"d-flex justify-content-center\" id=\"paypal-button-container\"></div>\n          </div>\n          <div v-if=\"infor.fullName ==='' || infor.address === '' || infor.email==='' || infor.phone ==='' \" class=\"text-center text-warning mb-5\">Please fill in the recipient's information</div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapGetters, mapState, mapActions, mapMutations} from \"vuex\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport * as yup from \"yup\";\nimport {currency} from \"../../utils/currency\";\n\nexport default {\n  name: \"Checkout\",\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  mounted() {\n    const script = document.createElement(\"script\")\n    script.src =\n        \"https://www.paypal.com/sdk/js?client-id=AbTnXKHy0QyzQb-I6J9JxIeVYJGmcnc8HblkL5ycQjAuo6epSNptQtxUjF0bRhmfhboY0Z0--nubE1RH&currency=USD\"\n    script.addEventListener(\"load\", this.setLoaded)\n    document.body.appendChild(script)\n  },\n  data() {\n    const schema = yup.object().shape({\n      email: yup\n          .string()\n          .required(\"Email is required!\")\n          .email(\"Email is invalid!\"),\n      fullname: yup\n          .string()\n          .required(\"Full name is required!\"),\n      phone: yup\n          .string()\n          .required(\"Phone is required\"),\n      address: yup\n          .string()\n          .required(\"Address is required\")\n    });\n\n    return {\n      schema,\n      loaded: false,\n      paidFor: false,\n      infor: {\n        fullName: \"\",\n        phone: \"\",\n        address: \"\",\n        email: \"\"\n      }\n    };\n  },\n  computed: {\n    ...mapState(\"users\",[\"user\"]),\n    ...mapState(\"cart\", [\"products\"]),\n    ...mapGetters(\"cart\", [\"totalItems\",\"subTotal\", \"getProductsInCart\"])\n  },\n  methods: {\n    currency,\n    ...mapActions(\"cart\", [\"changeStatusOrderItems\"]),\n    ...mapMutations(\"cart\", [\"REMOVE_CART\"]),\n    setLoaded: function() {\n      this.loaded = true;\n      window.paypal\n          .Buttons({\n            createOrder: (data, actions) => {\n              return actions.order.create({\n                purchase_units: [\n                  {\n                    description: \"this is description\",\n                    amount: {\n                      currency_code: \"USD\",\n                      value: this.subTotal\n                    },\n                    style: {\n                      size: 'large',\n                      color: 'gold',\n                      shape: 'pill',\n                    },\n                  }\n                ]\n              });\n            },\n            onApprove: async (data, actions) => {\n              try {\n                const order = await actions.order.capture();\n                this.paidFor = true;\n                console.log(order);\n                await this.changeStatusOrderItems({\n                  userId: this.user.id,\n                  products: this.getProductsInCart,\n                  addressShipping: {\n                    user_id: this.user.id,\n                    address: this.infor.address,\n                    email: this.infor.email,\n                    phone: this.infor.phone,\n                    full_name: this.infor.fullName\n                  },\n                  orders: this.products,\n                  total: this.subTotal\n                })\n                await this.REMOVE_CART();\n                await this.$router.push(\"/\")\n              } catch (e) {\n                console.log(1)\n                console.log(e)\n              }\n            },\n            onError: err => {\n              this.$router.push(\"/home\")\n              console.log(err);\n            }\n          })\n          .render('#paypal-button-container');\n    },\n\n  }\n}\n</script>\n\n<style scoped>\n.bd-placeholder-img {\n  font-size: 1.125rem;\n  text-anchor: middle;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.form-control {\n  border: 1px solid #ced4da !important;\n}\n\n@media (min-width: 768px) {\n  .bd-placeholder-img-lg {\n    font-size: 3.5rem;\n  }\n}\n\n</style>","import { render } from \"./Checkout.vue?vue&type=template&id=f86e4068&scoped=true\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js\"\n\nimport \"./Checkout.vue?vue&type=style&index=0&id=f86e4068&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\CosmeticsStore\\\\shopping\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f86e4068\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Checkout.vue?vue&type=style&index=0&id=f86e4068&scoped=true&lang=css\""],"sourceRoot":""}